using System.Linq;
using Content.Shared.Preferences;
using Content.Shared.Roles;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client._CD.Admin.UI;

[GenerateTypedNameReferences]
public sealed partial class EventPreferences : Control
{
    public EventPreferences()
    {
        RobustXamlLoader.Load(this);
    }

    public void SetPreferenceList(HumanoidCharacterProfile userPreferences, IEnumerable<AntagPrototype> listablePreferences)
    {
        // representing whether or not a player has a preference with red and green colors
        foreach (var listablePreference in listablePreferences)
        {
            var label = new Label();
            Color color = Color.Red;
            if (userPreferences.AntagPreferences.Contains(listablePreference))
                color = Color.Green;

            label.Text = Loc.GetString(listablePreference.Name);
            label.Modulate = color;

            EventPrefContainer.AddChild(label);
        }
    }
}
